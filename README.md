# å’Œé£å¤©æ°”å‘½ä»¤è¡ŒæŸ¥è¯¢å·¥å…·

åŸºäºå’Œé£å¤©æ°”APIå¼€å‘çš„å‘½ä»¤è¡Œå¤©æ°”æŸ¥è¯¢å·¥å…·ï¼Œæ”¯æŒé€šè¿‡åŸå¸‚åç§°æŸ¥è¯¢å®æ—¶å¤©æ°”ä¿¡æ¯ã€‚

## åŠŸèƒ½ç‰¹æ€§

- ğŸ” æ¨¡ç³ŠåŸå¸‚æœç´¢ï¼ˆæ”¯æŒä¸­æ–‡/æ‹¼éŸ³ï¼‰
- ğŸŒ¦ï¸ å®æ—¶å¤©æ°”æ•°æ®è·å–
- ğŸ” è‡ªåŠ¨JWT Tokenç”Ÿæˆï¼ˆEdDSAç®—æ³•ï¼‰
- ğŸ—ºï¸ å¤šçº§è¡Œæ”¿åŒºåˆ’æ˜¾ç¤ºï¼ˆçœ/å¸‚/ï¼‰
- âš¡ 5åˆ†é’ŸTokenè‡ªåŠ¨åˆ·æ–°

## æ–‡ä»¶ç»“æ„

```
Qweather-cli/
â”œâ”€â”€ main.py          # ä¸»ç¨‹åºå…¥å£
â”œâ”€â”€ geo_api.py       # åŸå¸‚æœç´¢æ¨¡å—
â”œâ”€â”€ weather_api.py   # å¤©æ°”æŸ¥è¯¢æ¨¡å—
â”œâ”€â”€ jwt_token.py     # JWTç”Ÿæˆæ¨¡å—
â””â”€â”€ requirements.txt # ä¾èµ–åˆ—è¡¨
```

## å¿«é€Ÿå¼€å§‹

### å‰ç½®è¦æ±‚

1. æ³¨å†Œå’Œé£å¤©æ°”è´¦å·ï¼š[å¼€å‘è€…æ§åˆ¶å°](https://dev.qweather.com/)
2. ç”ŸæˆEd25519å¯†é’¥å¯¹ï¼š
```bash
openssl genpkey -algorithm ED25519 -out ed25519-private.pem \
&& openssl pkey -pubout -in ed25519-private.pem > ed25519-public.pem
```
3. åˆ›å»ºé¡¹ç›®å¹¶ä¸Šä¼ `ed25519-public.pem`è·å–ï¼š
   - é¡¹ç›®ID (`sub` claim)
   - å‡­æ® ID (`kid` header)

### å®‰è£…æ­¥éª¤

1. å…‹éš†ä»“åº“
   ```bash
   git clone https://github.com/Au403/Qweather-cli.git
   cd Qweather-cli
   ```

2. å®‰è£…ä¾èµ–
   ```bash
   pip install -r requirements.txt
   ```

3. é…ç½®å¯†é’¥
   ```bash
   # å°†ç”Ÿæˆçš„ç§é’¥æ–‡ä»¶æ”¾å…¥é¡¹ç›®æ ¹ç›®å½•
   cp /path/to/ed25519-private.pem ./
   ```

4. ä¿®æ”¹é…ç½®
ï¼ˆç¼–è¾‘`jwt_token.py`ï¼‰
   ```python
   # jwt_token.py
   payload = {
       'sub': 'YOUR_SUB_ID'  # æ›¿æ¢ä¸ºä½ çš„é¡¹ç›®ID
   }
   headers = {
       'kid': 'YOUR_KEY_ID'      # æ›¿æ¢ä¸ºä½ çš„å‡­æ® ID
   }
   ```
   (ç¼–è¾‘`main.py`)
   ```python
   API_HOST = "https://your_api_host"   #æ›¿æ¢ä¸ºä½ çš„API Host
   ```

### ä½¿ç”¨ç¤ºä¾‹

```bash
# å¯åŠ¨ç¨‹åº
python main.py

# äº¤äº’ç¤ºä¾‹
è¯·è¾“å…¥åŸå¸‚åç§° (qé€€å‡º): æ­å·

ğŸ” æ‰¾åˆ°ä»¥ä¸‹åŸå¸‚ï¼š
1. æ­å· (æµ™æ±Ÿçœ/æ­å·), ä¸­å›½
2. è§å±± (æµ™æ±Ÿçœ/æ­å·), ä¸­å›½
3. æ¡åº (æµ™æ±Ÿçœ/æ­å·), ä¸­å›½
4. æ·³å®‰ (æµ™æ±Ÿçœ/æ­å·), ä¸­å›½
5. å»ºå¾· (æµ™æ±Ÿçœ/æ­å·), ä¸­å›½

è¯·é€‰æ‹©åŸå¸‚ç¼–å·ï¼ˆ1-5ï¼‰: 1

ğŸŒ† åŸå¸‚ï¼šæ­å· (æµ™æ±Ÿçœ)
ğŸ•’ è§‚æµ‹æ—¶é—´ï¼š2025-04-08T20:50+08:00
ğŸŒ¡ æ¸©åº¦ï¼š23â„ƒ (ä½“æ„Ÿ 23â„ƒ)
ğŸŒˆ å¤©æ°”ï¼šå¤šäº‘ (151)
ğŸŒª é£åŠ›ï¼šä¸œå—é£ 1çº§
ğŸ’§ æ¹¿åº¦ï¼š40%
ğŸ‘ èƒ½è§åº¦ï¼š15å…¬é‡Œ
ğŸ“¡ æ•°æ®æºï¼šQWeather
```

## ä¾èµ–é¡¹

- Python
- requests
- PyJWT
- cryptography


## æˆæƒè®¸å¯

æœ¬é¡¹ç›®åŸºäº [MIT License](LICENSE) å‘å¸ƒï¼Œä½¿ç”¨APIæ•°æ®è¯·éµå®ˆ[å’Œé£å¤©æ°”å¼€å‘è€…åè®®](https://dev.qweather.com/docs/terms/)ã€‚

## ç›¸å…³èµ„æº

- [å’Œé£å¤©æ°”å¼€å‘æ–‡æ¡£](https://dev.qweather.com/docs/)
- [JWTç”ŸæˆæŒ‡å—](https://dev.qweather.com/docs/configuration/authentication/)
- [APIé”™è¯¯ç è¯´æ˜](https://dev.qweather.com/docs/resource/error-code/)